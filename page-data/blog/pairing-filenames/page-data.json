{"componentChunkName":"component---src-templates-blog-template-js","path":"/blog/pairing-filenames","result":{"data":{"markdownRemark":{"html":"<p>Over the past two years I have been taking photos with my leica sofort. I read into what is the best way to preserve instant film and scanning them is the best method. When I take an instant photo I will label the back of the film with the date, time, location, what was happening and who was there. Since I want to scan the back of the instant film to preserve the label I gave it that means I must scan the front and back of the film. I quickly realized that I would now have to pair those two images together on my computer because I don't want all my files mixed up.</p>\n<h3>Scanning</h3>\n<p>I am using an epson v600 to scan my instant film. I have two 3D printed mounts that hold two photos each to prevent newton rings when scanning.</p>\n<p>I am able to scan 4 photos at once then flip and scan the backs. This produces 8 scans in total with 4 pairs. This is where I want an progamatic way of renaming the 4 pairs to be matched. I would not want to spend the time to click all 8 files see which ones match then rename them by hand. This will be prone to more human error and most likely end up taking more time.</p>\n<h3>Steps</h3>\n<ul>\n<li>Scan the directory for files that do not have a prefix of my choosing. This means they have already been processed. Instead of moving the files to a processed folder I keep everything in one place.</li>\n<li>Take the list of 8 files and sort by the <a href=\"https://nodejs.org/api/fs.html#fs_stats_birthtime\">birthtime</a> of the files.</li>\n<li>Match the 0th and 4th, 1st and 5th and so forth. These will represent the pairs of the front and back scans. We know we can do this because the scanning software will always scan the 4 front in the same order and the 4 back in the same order. This means we can look at the date created to match the front and back.</li>\n<li>rename each pair as such <code class=\"language-text\">&lt;prefix&gt;&lt;shortid&gt;__&lt;original filename&gt;</code>.</li>\n<li>Mine looks like <code class=\"language-text\">__INSTAX__&lt;shortid&gt;__originalName.tiff</code></li>\n</ul>\n<p>The front and back scans will have the same shortid in the prefix which means that they are paired. Also no two pairs will have the same short random id. The prefix out front is used for filtering the files when the application runs to remove files we should not process. I used the package <a href=\"https://www.npmjs.com/package/shortid\">shortid</a> to generate the random short id.</p>\n<h3>In action</h3>\n<ol>\n<li>\n<p>Scan the fronts of 4 instant film</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">ls</span> ~/scannedImages/\nimg0001.tiff\nimg0002.tiff\nimg0003.tiff\nimg0004.tiff</code></pre></div>\n</li>\n<li>\n<p>Scan the backs</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">ls</span> ~/scannedImages/\nimg0001.tiff\nimg0002.tiff\nimg0003.tiff\nimg0004.tiff\nimg0005.tiff\nimg0006.tiff\nimg0007.tiff\nimg0008.tiff</code></pre></div>\n</li>\n</ol>\n<p><code class=\"language-text\">img0001.tiff</code> &#x26; <code class=\"language-text\">img0005.tiff</code> should be paried, repeat for other files.</p>\n<ol start=\"3\">\n<li>\n<p>Run the CLI application with the 8 scans</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> run <span class=\"token function\">rename</span> ~/scanedImages/</code></pre></div>\n</li>\n<li>\n<p>The 8 scans are now in 4 pairs.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">ls</span> ~/scannedImages/\n__INSTAX__a4vhAoFG__img0001.tiff\n__INSTAX__hwX6aOr7__img0002.tiff\n__INSTAX__nYrnfYEv__img0003.tiff\n__INSTAX__7oet_d9Z__img0004.tiff\n__INSTAX__a4vhAoFG__img0005.tiff\n__INSTAX__hwX6aOr7__img0006.tiff\n__INSTAX__nYrnfYEv__img0007.tiff\n__INSTAX__7oet_d9Z__img0008.tiff</code></pre></div>\n</li>\n</ol>\n<h3>Overview</h3>\n<p>This method will allow you to easily store your scanned film on disk in pairs with minimal overhead.</p>\n<h3>Code</h3>\n<p>All the source code is open source and available on <a href=\"https://github.com/nadr0/pairing-filenames\">github</a>.</p>\n<h3>Related links</h3>\n<p>Newton rings - <a href=\"https://en.wikipedia.org/wiki/Newton%27s_rings\">https://en.wikipedia.org/wiki/Newton's_rings</a></p>\n<p>Epson v600 - <a href=\"https://epson.com/For-Home/Scanners/Photo-Scanners/Epson-Perfection-V600-Photo-Scanner/p/B11B198011\">https://epson.com/For-Home/Scanners/Photo-Scanners/Epson-Perfection-V600-Photo-Scanner/p/B11B198011</a></p>\n<p>Instax instant film scanning mount - <a href=\"https://www.zoekissel.com/products/mini\">https://www.zoekissel.com/products/mini</a></p>\n<p>leica sofort - <a href=\"https://us.leica-camera.com/Photography/Leica-SOFORT/Leica-SOFORT\">https://us.leica-camera.com/Photography/Leica-SOFORT/Leica-SOFORT</a></p>","frontmatter":{"date":"December 24, 2019","path":"/blog/pairing-filenames","title":"Pairing filenames","categories":["Code"],"tags":["node.js","automation"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false}}}