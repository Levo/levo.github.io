<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.1d7ebeb8f7b1f2bc59f5.css">code[class*=language-],pre[class*=language-]{color:#9efeff;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;font-family:Operator Mono,Fira Code,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-weight:400;font-size:17px;line-height:25px;letter-spacing:.5px;text-shadow:0 1px #222245}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{color:inherit;background:#a599e9}pre[class*=language-]{padding:2em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#1e1e3f}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token{font-weight:400}.token.cdata,.token.comment,.token.prolog{color:#b362ff}.token.atrule,.token.delimiter,.token.important,.token.keyword,.token.selector{color:#ff9d00}.token.attr-name,.token.operator{color:#ffb454}.token.punctuation{color:#fff}.token.boolean{color:#ff628c}.token.builtin,.token.doctype,.token.tag,.token.tag .punctuation{color:#ff9d00}.token.entity,.token.symbol{color:#6897bb}.token.constant,.token.number,.token.property,.token.variable{color:#ff628c}.token.char,.token.string{color:#a5ff90}.token.attr-value,.token.attr-value .punctuation{color:#a5c261}.token.attr-value .punctuation:first-child{color:#a9b7c6}.token.url{color:#287bde;text-decoration:underline}.token.function{color:#fad000}.token.regex{background:#364135}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.inserted{background:#0f0}.token.deleted{background:#ff000d}code.language-css .token.property,code.language-css .token.property+.token.punctuation{color:#a9b7c6}code.language-css .token.id,code.language-css .token.selector>.token.attribute,code.language-css .token.selector>.token.class,code.language-css .token.selector>.token.pseudo-class,code.language-css .token.selector>.token.pseudo-element{color:#ffc66d}.token.class-name{color:#fb94ff}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:none}pre .line-highlight,pre .line-highlight.line-highlight,pre>code.line-highlight{margin-top:36px;background:-webkit-gradient(linear,left top,right top,from(rgba(179,98,255,.17)),to(transparent));background:linear-gradient(90deg,rgba(179,98,255,.17),transparent)}pre .line-highlight:before,pre .line-highlight[data-end]:after,pre>code.line-highlight:before,pre>code.line-highlight[data-end]:after{content:""}html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{color:#636e72;background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0;color:#2d3436}div>a:not(:last-child){padding-right:16px}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45em georgia,serif;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{color:rgba(0,0,0,.8);font-family:georgia,serif;font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt"}img{max-width:100%;padding:0;margin:0 0 1.45rem}h1{font-size:2.25rem}h1,h2{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{padding:0;margin:0 0 1.45rem}ol,ul{padding:0;margin:0 0 1.45rem 1.45rem;list-style-position:outside;list-style-image:none}dd,dl,figure,p{padding:0;margin:0 0 1.45rem}pre{margin:0 0 1.45rem;font-size:.85rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}table{font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset,table{padding:0;margin:0 0 1.45rem}blockquote{padding:0;margin:0 1.45rem 1.45rem}form,iframe,noscript{padding:0;margin:0 0 1.45rem}hr{padding:0;margin:0 0 calc(1.45rem - 1px);background:rgba(0,0,0,.2);border:none;height:1px}address{padding:0;margin:0 0 1.45rem}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:.2em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}.tags>.tag{margin-right:4px;margin-bottom:4px}.postlinks>.postlink{margin-bottom:12px}</style><meta name="generator" content="Gatsby 2.18.12"/><title data-react-helmet="true">Articles | Kevin Nadro</title><meta data-react-helmet="true" name="description" content="Kevin Nadro is a full stack developer with a focus on Node.js, modern javascript, and web application development."/><meta data-react-helmet="true" property="og:title" content="Articles"/><meta data-react-helmet="true" property="og:description" content="Kevin Nadro is a full stack developer with a focus on Node.js, modern javascript, and web application development."/><meta data-react-helmet="true" property="og:type" content="website"/><link rel="icon" href="/icons/icon-48x48.png?v=e880dcede257ce02be9a0e7c03fb3a3d"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=e880dcede257ce02be9a0e7c03fb3a3d"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=e880dcede257ce02be9a0e7c03fb3a3d"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=e880dcede257ce02be9a0e7c03fb3a3d"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=e880dcede257ce02be9a0e7c03fb3a3d"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=e880dcede257ce02be9a0e7c03fb3a3d"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=e880dcede257ce02be9a0e7c03fb3a3d"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=e880dcede257ce02be9a0e7c03fb3a3d"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=e880dcede257ce02be9a0e7c03fb3a3d"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link as="script" rel="preload" href="/webpack-runtime-71d9917e62036953fb7b.js"/><link as="script" rel="preload" href="/app-467134a296ca65dfa606.js"/><link as="script" rel="preload" href="/styles-d5342857dca23763976e.js"/><link as="script" rel="preload" href="/commons-5e8bf312fb7585054b71.js"/><link as="script" rel="preload" href="/component---src-templates-blog-template-js-82feed87a1b5c4a4cf77.js"/><link as="fetch" rel="preload" href="/page-data\blog\pairing-filenames\page-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><header style="margin-bottom:1.45rem"><div style="margin:0 auto;max-width:960px;padding:1.45rem 1.0875rem;display:flex;flex-direction:row;align-items:center;justify-content:space-between"><div><a style="text-decoration:none" href="/">Kevin Nadro</a></div><div style="display:flex;align-items:center;flex-direction:row"><a style="text-decoration:none" href="/about-me/">About me</a><a style="text-decoration:none" href="/articles/">Articles</a><a style="text-decoration:none" href="/contact/">Contact</a></div></div></header><div style="margin:0 auto;max-width:960px;padding:0px 1.0875rem 1.45rem;padding-top:0"><main><div class="blog-post-container"><div class="blog-post"><h1>Pairing filenames</h1><div class="tags" style="display:flex;flex-direction:row;align-items:center;justify-content:flex-start;flex-wrap:wrap"><div class="tag" style="padding:2.5px 5px;background:#b2bec3;font-size:12px;border-radius:5px;text-transform:uppercase;white-space:nowrap">node.js</div><div class="tag" style="padding:2.5px 5px;background:#b2bec3;font-size:12px;border-radius:5px;text-transform:uppercase;white-space:nowrap">automation</div></div><p></p><h2>December 24, 2019</h2><div class="blog-post-content"><p>Over the past two years I have been taking photos with my leica sofort. I read into what is the best way to preserve instant film and scanning them is the best method. When I take an instant photo I will label the back of the film with the date, time, location, what was happening and who was there. Since I want to scan the back of the instant film to preserve the label I gave it that means I must scan the front and back of the film. I quickly realized that I would now have to pair those two images together on my computer because I don't want all my files mixed up.</p>
<h3>Scanning</h3>
<p>I am using an epson v600 to scan my instant film. I have two 3D printed mounts that hold two photos each to prevent newton rings when scanning.</p>
<p>I am able to scan 4 photos at once then flip and scan the backs. This produces 8 scans in total with 4 pairs. This is where I want an progamatic way of renaming the 4 pairs to be matched. I would not want to spend the time to click all 8 files see which ones match then rename them by hand. This will be prone to more human error and most likely end up taking more time.</p>
<h3>Steps</h3>
<ul>
<li>Scan the directory for files that do not have a prefix of my choosing. This means they have already been processed. Instead of moving the files to a processed folder I keep everything in one place.</li>
<li>Take the list of 8 files and sort by the <a href="https://nodejs.org/api/fs.html#fs_stats_birthtime">birthtime</a> of the files.</li>
<li>Match the 0th and 4th, 1st and 5th and so forth. These will represent the pairs of the front and back scans. We know we can do this because the scanning software will always scan the 4 front in the same order and the 4 back in the same order. This means we can look at the date created to match the front and back.</li>
<li>rename each pair as such <code class="language-text">&lt;prefix&gt;&lt;shortid&gt;__&lt;original filename&gt;</code>.</li>
<li>Mine looks like <code class="language-text">__INSTAX__&lt;shortid&gt;__originalName.tiff</code></li>
</ul>
<p>The front and back scans will have the same shortid in the prefix which means that they are paired. Also no two pairs will have the same short random id. The prefix out front is used for filtering the files when the application runs to remove files we should not process. I used the package <a href="https://www.npmjs.com/package/shortid">shortid</a> to generate the random short id.</p>
<h3>In action</h3>
<ol>
<li>
<p>Scan the fronts of 4 instant film</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">ls</span> ~/scannedImages/
img0001.tiff
img0002.tiff
img0003.tiff
img0004.tiff</code></pre></div>
</li>
<li>
<p>Scan the backs</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">ls</span> ~/scannedImages/
img0001.tiff
img0002.tiff
img0003.tiff
img0004.tiff
img0005.tiff
img0006.tiff
img0007.tiff
img0008.tiff</code></pre></div>
</li>
</ol>
<p><code class="language-text">img0001.tiff</code> &#x26; <code class="language-text">img0005.tiff</code> should be paried, repeat for other files.</p>
<ol start="3">
<li>
<p>Run the CLI application with the 8 scans</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> run <span class="token function">rename</span> ~/scanedImages/</code></pre></div>
</li>
<li>
<p>The 8 scans are now in 4 pairs.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">ls</span> ~/scannedImages/
__INSTAX__a4vhAoFG__img0001.tiff
__INSTAX__hwX6aOr7__img0002.tiff
__INSTAX__nYrnfYEv__img0003.tiff
__INSTAX__7oet_d9Z__img0004.tiff
__INSTAX__a4vhAoFG__img0005.tiff
__INSTAX__hwX6aOr7__img0006.tiff
__INSTAX__nYrnfYEv__img0007.tiff
__INSTAX__7oet_d9Z__img0008.tiff</code></pre></div>
</li>
</ol>
<h3>Overview</h3>
<p>This method will allow you to easily store your scanned film on disk in pairs with minimal overhead.</p>
<h3>Code</h3>
<p>All the source code is open source and available on <a href="insert%20link%20here">github</a>.</p>
<h3>Related links</h3>
<p>Newton rings - <a href="https://en.wikipedia.org/wiki/Newton%27s_rings">https://en.wikipedia.org/wiki/Newton's_rings</a></p>
<p>Epson v600 - <a href="https://epson.com/For-Home/Scanners/Photo-Scanners/Epson-Perfection-V600-Photo-Scanner/p/B11B198011">https://epson.com/For-Home/Scanners/Photo-Scanners/Epson-Perfection-V600-Photo-Scanner/p/B11B198011</a></p>
<p>Instax instant film scanning mount - <a href="https://www.zoekissel.com/products/mini">https://www.zoekissel.com/products/mini</a></p>
<p>leica sofort - <a href="https://us.leica-camera.com/Photography/Leica-SOFORT/Leica-SOFORT">https://us.leica-camera.com/Photography/Leica-SOFORT/Leica-SOFORT</a></p></div></div></div></main><footer></footer></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-155164710-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/pairing-filenames";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-467134a296ca65dfa606.js"],"component---src-templates-blog-template-js":["/component---src-templates-blog-template-js-82feed87a1b5c4a4cf77.js"],"component---src-pages-404-js":["/component---src-pages-404-js-349560dbfdfb9ab10aa1.js"],"component---src-pages-about-me-js":["/component---src-pages-about-me-js-d3fce44ed977ab63e876.js"],"component---src-pages-articles-js":["/component---src-pages-articles-js-0e9534a8a21012b148de.js"],"component---src-pages-contact-js":["/component---src-pages-contact-js-6d0475387dce3f7e21f9.js"],"component---src-pages-index-js":["/component---src-pages-index-js-25b3a3ab79ecaa4970c7.js"]};/*]]>*/</script><script src="/component---src-templates-blog-template-js-82feed87a1b5c4a4cf77.js" async=""></script><script src="/commons-5e8bf312fb7585054b71.js" async=""></script><script src="/styles-d5342857dca23763976e.js" async=""></script><script src="/app-467134a296ca65dfa606.js" async=""></script><script src="/webpack-runtime-71d9917e62036953fb7b.js" async=""></script></body></html>